# Скрипты, обеспечивающие сборку программы на EO

*Прочитать на другом языке: [English](readme.md)*

Убедитесь, что вы полностью выполнили главный [гайд](https://github.com/polystat/c2eo#2-build-llvm--clang)

Все скрипты запускаются из папки `c2eo/project/scripts`

## Возможнные команды

1. Запуск тестирования
    ```bash
    # По умолчанию будет браться путь "path_to_tests" и конфигурация "config" в settings.yml, вы можете установить другие значения в settings.yml

    $ ./test.py


    # Можете указать другой путь при запуске

    $ ./test.py ../tests/nkchuykin


    # Можете указать другой путь и конфигурацию при запуске

    $ ./test.py ../tests/nkchuykin without_struct
    ```

    <details>
    <summary><bold>Дополнительная информация...</bold></summary>
    При тестировании запускается проверка ЕО версии, затем собирается <code>c2eo</code>, происходит очистка от результатов тестирования, поиск файлов на С, их последующая транспиляция c помощью <code>c2eo</code>. Затем полученные файлы собираются в файлы на ЕО. После этого переносятся в ЕО проект, запускается сборка проекта. Проводится тестирование и сравнение результатов файлов на С и на ЕО.
    <p></p>

    Тесты размещаются в каталоге <code>tests</code>. Каждый тест - файл на C, лежит в отдельном подкаталоге. Имя файла программы совпадает с именем каталога и имеет расширение .c. В ходе тестирования в этих каталогах тестов создаются дополнительные данные с тестовой информацией.

    В каталоге <code>scripts/data/config</code> хранятся файлы, используемые для выборочного тестирования. Каждый файл содержит список строк, одну из которых должен содержать путь до файла. Если в начале строки поставить знак !, тогда в пути до файла не должно быть ни одной строки из этого списка.
    </details>
    &nbsp;

1. Транспиляция и сборка всех си-файлов, обнаруженных в данной директории

    ```bash
    $ ./transpile_c2eo.py ../tests/nchuikin 
    ```

1. Очистить все весь католог, оставив только си-файлы (без -ео в конце)

    ```bash
    # По умолчанию будет браться путь "path_to_tests", вы можете установить другое значение в settings.yml
    
    $ ./clean_before_transpilation.py


    # Можете указать другой путь и конфигурацию при запуске

    $ ./clean_before_transpilation.py ../tests/nkchuykin
    ```


1. Сборка EO проекта `../../result`

    ```bash
    $ ./build_eo.py
    ```

1. Сборка с2eo

    ```bash
    # По умолчанию будет браться путь "path_to_c2eo", вы можете установить другое значение в settings.yml
    
    $ ./build_c2eo.py


    # Можете указать другой путь при запуске

    $ ./build_c2eo.py ../my_dir/bin
    ```

1. Сборка все `.glob` и `.stat` файлов в `.eo` файлы

    ```bash
    # По умолчанию будет браться путь "path_to_assembly", вы можете установить другое значение в settings.yml
    
    $ ./collect_transpiled_code.py
    ```

1. Обновить EO версию

    ```bash
    $ ./update_eo_version.py
    ```

1. `settings.py` - скрипт с доступом к настройкам проекта

1. `tools.py` - скрипт с полезными функциями
